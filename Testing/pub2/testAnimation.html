<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<style></style>
	<title>Animation test</title>
</head>

<body>
    <script src="Animations.js" type="text/javascript"></script>
    <script src="Triangle.js" type="text/javascript"></script>
    <script src="Delaunay.js" type="text/javascript"></script>
    <script src="Point.js" type="text/javascript"></script>
    <script src="Line.js" type="text/javascript"></script>

<!--    <h2>Animation Test</h2>-->
    <canvas id="canvas" width= "900" height= "900""></canvas>
    <script>
        var canvas = document.getElementById("canvas")
        let triangulation = Delaunay.triangulation(Delaunay.randomPointsGenerator(7, canvas), canvas.width, canvas.height)
        let firstPoint = triangulation[0].point1
        let endPoint = triangulation[0].point2
        console.log(firstPoint + "----->" + endPoint)
        var animation = new Animations(triangulation, canvas)
        animation.setPosition(firstPoint[0], firstPoint[1])
        animation.setDirection(firstPoint, endPoint)
        animation.firstPoint = firstPoint
        animation.endPoint = endPoint
        // catImage  = new Image()
        // catImage.src = "catsmall2.png"

        setInterval(function(){
          canvas.getContext("2d").clearRect(0, 0, canvas.width, canvas.height)
          for(let tri = 0; tri < triangulation.length; tri++){
            let ctx = canvas.getContext("2d")
            let triangle = triangulation[tri]
            ctx.beginPath()
            ctx.moveTo(triangle.point1[0], triangle.point1[1])
            ctx.lineTo(triangle.point2[0], triangle.point2[1])
            ctx.lineTo(triangle.point3[0], triangle.point3[1])
            ctx.lineTo(triangle.point1[0], triangle.point1[1])
            ctx.closePath()
            ctx.lineWidth = 1
            ctx.strokeStyle = '#000'
            ctx.stroke()
          }
            let info = animation.getNextFrame()
            animation.drawCat(canvas, info.x, info.y, info.angle, info.frame)
            // animation.animateSprite(pos[0],pos[1],catImage, 400, 25, 8)



        }, 1000/30)
        // setInterval(function(){
        //     animation.animateSprite(25,25,catImage, canvas, 400, 25, 8)
        //
        //
        // }, 75)
    </script>
	

</body>

</html>