\documentclass[a4paper,11pt]{article}

\usepackage[margin=3cm]{geometry}

\usepackage{graphicx}
\usepackage{subcaption}
\usepackage[colorlinks,allcolors=violet]{hyperref}
\usepackage{url}
\usepackage{lmodern}
\usepackage[dutch]{babel}

% https://tex.stackexchange.com/questions/94032/fancy-tables-in-latex
\usepackage[table]{xcolor}
\usepackage{booktabs}

\usepackage[utf8]{inputenc}

% https://tex.stackexchange.com/questions/664/why-should-i-use-usepackaget1fontenc
\usepackage[T1]{fontenc}
\usepackage{microtype} % good font tricks

\newcommand{\note}[1]{{\colorbox{yellow!40!white}{#1}}}
\newcommand{\exampletext}[1]{{\color{blue!60!black}#1}}

\begin{document}

\noindent
\colorbox[HTML]{52BDEC}{\bfseries\parbox{\textwidth}{\centering\large
  --- Verslag P\&O CW 2019--2020 Taak 3 ---
}}
\\[-1mm]
\colorbox[HTML]{00407A}{\bfseries\color{white}\parbox{\textwidth}{
  Department Computerwetenschappen -- KU Leuven
  \hfill
  \today
}}
\\

\smallskip

\noindent
%\mbox{}\hfill
\begin{tabular}{*4l}
\toprule
\multicolumn{2}{l}{\large\textbf{Team 12}} \\
\midrule
Frédéric Blondeel & 20h \\
Martijn Debeuf & 45h \\
Toon Sauvillers & 60h \\ % fill in the time spend on this task per team member who worked on it
Dirk Vanbeveren & 12h \\
Bert Van den Bosch & 52h \\
Seppe Van Steenbergen & 54h \\


\bottomrule
\hline
\end{tabular}\\

\noindent
{\color[HTML]{52BDEC} \rule{\linewidth}{1mm} }

\section{Introductie}\label{sec:introductie}
\input{introduction}
% The communication protocol should accommodate for:
% \begin{itemize}
%     \item The transmission of images from the smartphone camera to the master.
%     \item Manipulation of the background color of the client screens.
% \end{itemize}
% We are developing a game that requires two players who engage in a confrontation to take a mug shot picture of each other.
% Our game rules will positively encourage both players to provide clean pictures.
% This turned out to be essential since the DeepFace neural network \cite{website:facerecognizer} that we use was not accurate enough in the other scenario's we tested.
% Our analysis of the recognition rate is given in \S\ref{sec:technical-analysis}. Our systematic tests showed we have less than $1\%$~probability of not identifying the correct user out of our test database with $1000$ representative mugshot pictures.

% One unforeseen side effect of the usage of the DeepFace~\cite{amos2016openface} algorithm is the high power consumption.
% We had to balance the performance of the face recognition with battery life time. This was most significant for our indoor game play. In a test run we estimated that the average mobile phone from the supported types will be capable of playing for about $4$~hours and in that time frame scanning and identifying $60$~pictures per hour, see \S\ref{sec:technical-analysis}.


\section{Design schematics and screenshots}\label{sec:schematic}

\note{($\approx$ 1 page. Depending on the need for a design overview.)}
\exampletext{\textit{Design schematics, deployment diagrams, class diagrams, sequence diagrams, \ldots\ Whatever you think we need to understand your design. You could add a little bit of text here but keep that under half a page. You reference the illustrations here from~\S\ref{sec:technical-analysis} when needed.}}

\exampletext{All communication between clients runs through a nodejs server. We use the Socketio~\cite{socketio} library to set up a bidirectional communication channel between client and server. A deployment diagram can be found in Figure~\ref{fig:deployment}. Clients can take on a specific master or slave role by opening a specific webpage within the browser, i.e., the slaves will surf to \texttt{webaddress/slave}, while a client that wants to be the master loads the webpage found at \texttt{webaddress/master}.}

\begin{figure}[h!]
	\centering
	\includegraphics[width=\textwidth]{figures/deployment}
	\caption{Deployment diagram of the multiscreen casting framework.} 
	\label{fig:deployment}
\end{figure}

\exampletext{We rely on webrtc~\cite{website:webrtc} to collect a client-side video stream. This module offers the necessary tools for serialization, i.e., as a base64 encoded string. Serialization is required for transmission~\cite{website:serialization}. Server-side the backend code will process the image. In our demo we broadcast the image by sending it to all slaves. Slaves and masters can be reached by the server, as we use the concept of a namespace~\cite{website:namespaces}. A namespace can be used to group clients with a similar role, and broadcast to them. 

A socket is assigned a unique identifier by Socketio. This identifier can be used to emit messages from the server to a specific client. A list of connected clients is available through the API of Socketio \cite{website:socketio-clients}.}

\section{Algorithms}\label{sec:technical-analysis}

\note{($\approx$ 1 page. Depending on necessity)}
\exampletext{\textit{When you design or use an algorithm you should be able to explain how well it performs and if it satisfies the requirements. Often there will be alternatives or system parameters that need to be chosen. We want to know why you chose a specific set of parameters, or why you chose an approach over another. We supply some example text of last year.}}


\subsection{Scherm identificatie met barcodes}

\subsubsection{Algemene uitleg}

Voor de verschillende schermen te identificeren wordt gebruik gemaakt van een kleuren barcode. De barcode bestaat uit een herhalend patroon van 5 unieke kleuren telkens gevolgd door een witte lijn. Door het gebruik van deze witte lijn weet het algoritme waar het patroon eindigt en de volgende sequentie terug opnieuw begint. De 5 kleuren zijn speciaal gekozen om zo ver mogelijk van elkaar verwijderd te zijn in het HSL spectrum. Op deze manier is de kans op foute detectie zo klein mogelijk gemaakt. Voor de identificatie van de slaves wordt er dus een unieke combinatie van deze 5 kleuren weergegeven. Deze vormt dan een unieke vijfcijferige code die gelinkt kan worden aan de bijhorende slave. Dit zorgt ervoor dat we in theorie een totaal van $5!$ ($=120$) verschillende schermen op één moment kunnen detecteren. Herhaling van het patroon heeft als resultaat dat bij overlap het scherm nog steeds geïdentificeerd kan worden. Het algoritme zal van links naar rechts over de pixels, die zich in het midden van het scherm bevinden, itereren (complexiteit N). Vervolgens worden de HSL waarden van deze pixels bekeken om de overeenkomstige kleur van elke pixel te achterhalen. Wanneer een HSL waarde binnen de gewenste range valt, wordt het overeenkomstig cijfer opgeslaan in een lijst. Bij het bereiken van een witte lijn weet het algoritme dat het aan het einde van het patroon is. Wanneer dit het geval is wordt het inlezen van de volledige vijfcijferige code gecontroleerd op volledigheid. Zo niet wordt de lijst leeg gehaald en zoekt het algoritme verder. Het herhalend patroon is dus essentieel aan het correct inlezen van de barcode. Bijgevolg werd het aantal herhalingen van het patroon bekeken in een aantal testen. Uit deze testen werd een aantal van 7 herhalingen als optimaal resultaat bekomen. Een groter aantal herhalingen stemt overeen met meer kansen op een mogelijke detectie, maar stemt ook overeen met een kleinere oppervlakte per herhaling. Deze kleinere oppervlakte is dan weer nadelig voor detectie. 

\begin{figure}[h]
\centering
\includegraphics[scale=0.1]{barcode}
\caption{Voorbeeld van een barcode met 6 herhalingen.} 
\label{fig:barcode}
\end{figure}



\subsubsection{Data set}

Tijdens de testfase van het algoritme werden een aantal foto's genomen. Deze foto's verschilden in afstand tot het scherm, het scherm zelf (kleuren kunnen afwijken van scherm tot scherm) en het aantal herhalingen van het patroon (barcode).

\subsubsection{Experiments}\label{sec:experimenten}

\subsection{Image}
\subsubsection{Algemene uitleg}
\subsubsection{Data set}
\subsubsection{Experiments}

\section{Testen}
\input{testen}
\section{Besluit}\label{sec:besluit}
\input{besluit}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\bibliographystyle{plain}
\bibliography{bibliography}

% \bigskip

% \vspace*{\fill}

% %% This is a basic score card
% %% please fill in your team number and name
% %% don't touch the rest!
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \noindent
% %\mbox{}\hfill
% \begin{tabular}{*3l}
% \toprule
% \multicolumn{3}{l}{\large\textbf{Evaluation card: Team <number> <name>}} \\
% Criterion & Score (/10) & Remarks \hspace{6cm} \\
% \midrule
% References \\
% Algorithm descriptions \\
% Correctness \\
% Clearness \\
% Writing style \\
% Conciseness \\
% Self-evaluation \\
% Informative figures \\
% Tests \\
% \bottomrule
% \hline
% \end{tabular}

\end{document}