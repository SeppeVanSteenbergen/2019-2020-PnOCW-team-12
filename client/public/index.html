<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="HandheldFriendly" content="true" />
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title>client</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css">
    <script async src="alg/opencv.js" type="text/javascript"></script>
  </head>
  <body>
    <noscript>
      <strong>We're sorry but client doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>

  <!-- testing  code -->
<script type="text/javascript">
  var t = function(imgDat) {
    var c = document.createElement('canvas')
    c.width = imgDat.width
    c.height = imgDat.height
    var ctx = c.getContext('2d')
    ColorSpace.hslaToRgba(imgDat)
    ctx.putImageData(imgDat, 0,0)
    return c.toDataURL()
  }
  
  class ColorSpace {
    static hslaToRgba(pixels) {
      let R
      let G
      let B
      let tmp1
      let tmp2
      let tmpR
      let tmpG
      let tmpB
      for (let i = 0; i < pixels.length; i += 4) {
        let H = (pixels[i] * 2) / 360.0
        let S = pixels[i + 1] / 100.0
        let L = pixels[i + 2] / 100.0

        if (S === 0) {
          R = L
          G = L
          B = L
        } else {
          if (L < 0.5) {
            tmp1 = L * (1.0 + S)
          } else {
            tmp1 = L + S - L * S
          }
          tmp2 = 2 * L - tmp1

          tmpR = H + 1 / 3
          tmpR = this.setTemporaryInRange(tmpR)

          tmpG = H
          tmpG = this.setTemporaryInRange(tmpG)

          tmpB = H - 1 / 3
          tmpB = this.setTemporaryInRange(tmpB)

          R = this.hslaToRgbaCalculateColor(tmp1, tmp2, tmpR)
          G = this.hslaToRgbaCalculateColor(tmp1, tmp2, tmpG)
          B = this.hslaToRgbaCalculateColor(tmp1, tmp2, tmpB)
        }

        pixels[i] = Math.round(R * 255)
        pixels[i + 1] = Math.round(G * 255)
        pixels[i + 2] = Math.round(B * 255)
      }
    }
  }
</script>
</html>
